################################################################################
# File:    buskill.kv
# Purpose: This is the kivy styles used to setup the layout in the buskill gui
#          For more info, see: https://buskill.in/
# Authors: Michael Altfield <michael@buskill.in>
# Created: 2020-06-23
# Updated: 2020-06-23
# Version: 0.1
################################################################################

#:import MDToolbar kivymd.uix.toolbar
#:import MDLabel kivymd.uix.label

<CriticalError>:

	msg: msg

	orientation: 'vertical'
	pos_hint: {'center_x': 0.5, 'top': 0.95}
	size_hint: ( 0.9, 0.9 )
	spacing: 10

	TextInput:
		id: msg
		size_hint: (1,2)
		readonly: True

	Button:
		size_hint: (1,1)
		text: 'Click to file a bug report'
		halign: 'center'
		valign: 'middle'
		on_release: root.fileBugReport()

<MainWindow>:
	orientation: 'vertical'
	toggle_btn: toggle_btn
	status: status

	theme_cls: app.theme_cls

	NavigationLayout:

		ScreenManager:
			id: 'screen_manager'

			Screen:
				name: 'home'

				BoxLayout:
					orientation: 'vertical'
					size_hint: ( 1, 0.95 )
					pos_hint: {'top': 1}

					MDToolbar:
						id: toolbar
						title: 'BusKill'
						left_action_items: [[ 'menu', lambda x: nav_drawer.set_state('toggle') ]]
						elevation: 10

					BoxLayout:
						orientation: 'vertical'
						size_hint: ( 0.9, 1 )
						pos_hint: {"center_x": 0.5, 'top': 1}

						MDLabel:
							id: status 
							text: "BusKill is currently disarmed."
							theme_text_color: 'Primary'
							size_hint: (1,2)
							halign: 'center'
							valign: 'middle'

						MDRaisedButton:
							id: toggle_btn
							text: "Arm"
							#md_bg_color: 1,0,0,1
							size_hint: (1,1)
							halign: 'center'
							valign: 'middle'
							on_release: root.toggleBusKill()

		MDNavigationDrawer:
			id: nav_drawer

			BoxLayout:
				orientation: 'vertical'

				MDToolbar:
					title: 'BusKill'
					left_action_items: [[ 'menu', lambda x: nav_drawer.set_state('toggle') ]]

				ScrollView:

					MDList:

						OneLineIconListItem:
							text: 'Update'
							IconLeftWidget:
								icon: 'update'

